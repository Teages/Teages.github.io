---
layout: post
title: 手把手教你Cytoid制谱
date: 2020-02-11
Author: Teages
tags: [Daily, Cytoid]
comments: true
toc: true
---
 
鉴于很多人不会做Cytoid的谱面,为了方便学习交流,特撰写本教程

无论什么时候,看一下官方wiki总是有帮助的.

传送门:[官方wiki](https://github.com/Teages/Cytoid-wiki-Chinese/)

> 文章允许署名转载，转载请挂上原文链接（主要怕错误更正不能及时通知到位）

<!-- more -->

**公告**

> 警告:文中标识出"直接搬运wiki"的内容可能因年代久远,存在错误!!!请读者**自行鉴别**

**更新:**
> #4 2020/3/14 对PCtyx进行了大改，以适配v200,并修复一些错误
> 
> #3 2020/2/25 经过测试,#2中提到的延迟应该是0.9s,非常抱歉!!!!!
> 
> ~~#2~~ 2020/2/21 **修改被撤销** 同步修复wiki错误: 无论什么软件,判定线都需要~~0.9s~~0.8s来矫正到对应位置,见[第二步 : 调整音频](#第二步--调整音频)
> 
> #1 2020/2/21 更规范化的音频剪辑方法,见[第二步 : 调整音频](#第二步--调整音频)

文章欢迎在下方评论区指正（需要登录GitHub）

# 准备工作

>  做谱前必须要有的

1. 你的脑子
2. 耐心
3. 一部运行WIndows 10的PC
4. 一些乐理知识(了解节拍,BPM这些就足够了)
5. 你要做谱的音频(最好是mp3),搜索它的各项数据(例如:参与作曲的人)

> 免责声明:在你做谱之前,请注意避免版权纠纷,发生的任何纠纷都与本教程编者,Cytoid及CytoidIO无关!且CytoidIO有权下架任何被起诉侵权的谱面!

> Tips: 你准备的音频如果太过复杂,可能会增加做谱难度,请选择力所能及的音频

# 开始做谱

## 第一步 : 测量BPM

对于测量BPM,我们推荐使用[osu!](https://osu.ppy.sh/) (请不要下载osu!lazer,它不是一个完善的版本)

下面以osu!为例进行BPM测量,下载和安装osu!的步骤将被省略.

1. 打开osu!,选择Edit
2. 将你的mp3文件拖入osu!
3. 需要你输入歌曲信息时,直接取消(Cancel)
4. 进入timing
5. 按下空格键开始播放音频,同时跟着节拍按键盘上的 T 键.

按足够多次,你会得到一个相对准确的数.

> Tips:建议将这一步重复几次,因为如果BPM判断错误,你将难以制作出优秀的谱面



## 第二步 : 调整音频

调整音频,我们推荐使用开源免费的工具[Audacity ®](https://www.audacityteam.org/)

> Q : 为什么我们要调整音频?
>
> A : 实际上,Cytoid需要0.9s来调整判定线,如果没有这段时间,note会出现得非常突然

实际上,你可以使用任何你习惯使用的音频编辑工具,我们将以Audacity为例

首先找到音频的第一个峰,删去前面的空白

![1](/posts-source/cytoid/pic/1.png)

然后打开 生成 - 静音 ![2](/posts-source/cytoid/pic/2.png)

在前面插入0.9s的静音

![3](/posts-source/cytoid/pic/3.png)

大功告成!请使用 *导出* 功能,将你的音频导出为多种格式.

下面是一些推荐格式

| 软件     | 支持的格式      |
| -------- | --------------- |
| Cytoid   | ogg(首选),mp3等 |
| Pctyx    | ogg(首选),wav等 |
| Cy2unity | ogg,wav |

> 补充: 如果你觉得这样效果不好,可以直接在源音频前面加0.900s的静默,这样更简单但是可能导致节拍对不上!!! 

> 最好的办法: 增加静默时加0.9s以上的静默,至于加多少?这里有个公式.请把实际BPM代入下方公式计算:

> ```  Result = 0.9 + ( 60 / BPM )*k ``` ,k是任意一个自然数,你可以在自然数中选取一个适合的数代入k

> 合适是什么意思?导出以后,开制谱器加载音频就知道了,最好让音频的第一拍响起时,判定线正好在最低/最高处

## 第三步 : 开始制谱

这里有两种现代制谱器 : PCTyx 和 Cy2unity

编者建议使用PCTyx,因此教程以PCTyx v200.2为例

> Tips : Cy2unity 在其程序目录下自带了一份中文教程.


> 旧版本PCtyx教程: https://github.com/Teages/Cytoid-wiki-Chinese/tree/master/guides/charting/pctyx
>
> 以下是新版本教程


新版本的PCtyx终于来了！

来做篇针对新版本的教程吧，之后会整合到制谱教程里。

PCtyx下载 : [Github仓库](https://github.com/XionUzuki/PCtyx/releases)

<!-- more -->

### 界面内容

#### 开始的地方 : 文件界面

先来介绍一下一开始的界面 : 文件界面

![文件界面](/posts-source/newPCtyx/file.png)

每个按钮的功能都很清楚吧. 

在这个页面,我们最常做的只有下面几件事情

1. 加载音频
2. 加载之前做一半的铺面(.csv文件),或者新建一个铺面
3. 加载一个背景图片或是背景视频(通常是用来录制预览视频的)
4. 保存铺面
5. 导出铺面为C2格式(也就是导出成Cytoid能读取的谱面)

**需要注意的是,"New Chart"按钮和"Load"按钮功能类似,但是前者只能导入音频**

##### 加载音频

显而易见,直接点击"Load",选择你已经处理好的音频就行了.

> 注意:PCtyx(ver.200)支持的音频有 **.ogg** 等,暂时**不支持 MP3**

##### 加载之前做好一半的铺面

"Load"按钮可以加载很多东西,想导入音频一样导入你的谱面(.csv文件)就好了

> 注意:请先加载音频再加载谱面

##### 加载背景图片或视频

同样使用"Load"导入

> 支持的图片文件 : jpg,png等
>
> 支持的视频文件 : mp4等

##### 保存铺面

点击"Save Chart",输入保存文件的名字,**加上".csv"后缀**,点击保存即可

> 你或许需要一些[保存技巧](./#保存技巧)

##### 导出谱面为C2格式

点击"Save Chart",输入保存文件的名字,**加上".txt"后缀**,点击保存即可

> 保存的C2格式谱面需要打包成.cytoidlevel才能被Cytoid正常读取

#### 开始制谱 : 制谱界面

点击下图箭头所指的那个按钮,你就能进入制谱界面了!

![进入制谱界面](/posts-source/newPCtyx/to-charting.png)

下图是制谱界面的详细说明

![制谱界面](/posts-source/newPCtyx/charting.png)

##### 解释

###### 1. 扫描线控制器

- 最上面:意义不明,但对一般制谱没有影响.
- 控制判定线出现位置,可以做到判定线从同一方向扫描的特效(例如Cytus2中ChromeVOX,Glitch难度中的判定线特效).
- (**重要**)BPM控制,这个数值决定了扫描线速度,改变BPM可以做到变速和停线特效.

###### 2. 网格设置

点击第一个按键,你可以看到底栏变成了下图这样

![网格设置](/posts-source/newPCtyx/charting-2.png)

从左到右依次是:

- 网格列数,决定网格,一般取8或16最佳,特殊情况请检查歌曲的拍子结构
- 网格行数
- 偏移,BPM,还有一个不明觉厉的参数,这些对平常做谱都没有意义,请不要修改他们

###### 3. Note移动和扫描线设置

- 左右移动Note
- 上下移动Note

>  (这里这个版本标反了wwwwwww)

- 扫描线设置器,选中这个工具可以放置一个扫描线修改器,请把这个修改器放在一页最开始的地方,否则Cytoid会识别异常.

> 后面会讲到这玩意怎么用

###### 4. Note放置器

准确来说,它们的功能只是把你点击note变成你想要的样子,放置note实际上是[8. Note备选栏](#8. Note备选栏)的功能

从左到右依次是:

1. 普通的Note,右下是点锁的子锁链,但是Cytoid不认点锁
2. Hold,如果长度足够长会自动转换成Long Hold
3. 普通的锁链,右下角是子锁链,关于锁链的应用请见下文
4. ~~你没发现吗,这TM根本没有4,~~其实4就是子锁链的快捷键,只是没有标记出来
5. Click,一个让玩家又爱又恨的note
6. 不明觉厉,但请不要使用它,Cytoid不认这个note

选中你使用的Note放置器,点击一个note就能让它变成你选中放置器的样子

###### 5. 文件界面,预览和页面跳转

- 第一个按钮点了会回到上文的文件界面
- 第二个按钮点了可以开始预览谱面效果
- 第三个按钮点了会向前跳转**10**页
- 第四个按钮点了会向前跳**1**页

###### 6. 状态信息

从左到右依次是

- 扫描线方向(T从上到下,B从下到上)
- 当前页面的BPM
- 当前页面位置
- 当前页面开始处的时刻

###### 7. 页面跳转和bpm对齐设置

- 第一个按钮点了会向前跳转**10**页
- 第二个按钮点了会向前跳**1**页
- 第三个按钮用于调整一些更改BPM后的行为,一般不用理会

###### 8. Note备选栏

使用"AD"水平移动工具,将note移入网格内就能添加一个note

###### 9.  撤销变更,自动对齐和网格开关

- 左边按钮上面大大的**Ctrl + Z**让人一眼就知道它是干嘛的.要注意的是,点击它会导致**这一页**的更改**全部**撤销,如果你切了页面就没办法撤销了.
- 右上是自动对齐,开了以后移动note会自动对齐到网格上
- 右下是控制网格显示的.~~如果你觉得网格丑可以关掉他.(不是)~~

#### 预览界面

![preview](/posts-source/newPCtyx/preview.png)

- 左上角是停止和暂停,点停止按钮会回到开始预览的那一页,点暂停可以直接编辑这一页
- 中间上面是当前的note,下面是总note数
- 右边是分数

> 界面介绍就到此结束了

### 制谱流程

##### 第一步 : 导入

一般做谱的时候我们需要导入的有音频文件,当然可能也要导入之前做到一半的谱面.

如果你需要录制预览,可以再导入图片或者视频

对于一些人来说,导入曲绘~~(老婆)~~能提高他们的工作效率

#### 第二步 : 加一些note

##### 移动note

用wasd像其他游戏中移动人物一样移动,当然配合鼠标和滚轮能有更好的移动效果

> 试一试 : wasd,鼠标,滚轮要怎么配合才能达到最佳移动效果呢

##### 添加note

将note从左右的备选中挪到网格里就行了

##### 与音乐对齐

进入文件界面,勾上"1/2 Speed"选项.这样能让你更方便将铺面与音乐对齐

> Question : 仅仅靠目力~~(?)~~是难以对音的,怎么样才能更准确更方便的对音?

技巧 :

- 利用key音 : 仔细聆听key音,如果key音和节奏同步,那这个note与谱面是对其的
- 减小note大小 : 回到文件页面,点击"Size"调整note大小.一般来说,越小的note越方便对音

##### 添加hold

练习 :

1. 用hold工具点击note,把一个普通note变成hold
2. 试着用鼠标滚轮增加或减少这个hold的长度
3. 当这个hold延伸到页面以外的时候,hold就变成了长hold

> 观察 : 当hold变成长hold,到下一页去看一下,你发现了什么?

##### 添加锁链

锁链的规则可能有些复杂,但它很好理解,我们分两种情况

###### 1. 同时只有一条锁链

我们像下面这样摆放两条锁链

![两条不同时判定的锁链](/posts-source/newPCtyx/drag-1.png)

可以发现这如同我们的预期

![预览](/posts-source/newPCtyx/drag-2.png)

是不是很简单呢?

###### 2. 同时有多条锁链

有些时候,我们可能会想同时摆两条锁链.小明这样摆了一下,想让锁链像图中蓝线一样连接

![想象中](/posts-source/newPCtyx/drag-3.png)

但实际上,生活给予了他重击,编辑器像下图这样连接了(悲)

![生活的重击](/posts-source/newPCtyx/drag-4.png)

到底应该怎样连接呢?他思索了许久,用滚轮改变了两个note的序号

![drag-5](/posts-source/newPCtyx/drag-5.png)

现在锁链按照他预想的连接了!

###### 3. 总结

锁链头会尝试连接下一个有着相同序号的子锁链,找到另一个有相同序号的锁链头就停止尝试.然后它就会把之前找到的子锁链全部按时间一个个串起来.

**警告 : 你不应该在同一水平面放两个序号相同的子锁链**~~,勿谓言之不预~~

> 试一试 : 跨屏锁链怎么做呢?
>
> 进阶 : 怎么用锁链画一个爱心呢?

#### 第三步 : 保存与备份

常常有人谱面做到一半,因为各种原因,PCtyx异常退出了(悲).

这是件非常糟糕的事情,谱面很有可能会丢失,谁也不想这样的事情发生在自己头上.

这里我们介绍一种保存策略.

##### 常做保存

我有一个习惯,当做完一小部分以后,会保存一次.

保存的名称大概这样:`1.csv  2.csv  3.csv  4.csv  ...`

这种保存方法有两个好处: 一是能够避免上面那种情况,因为程序意外关闭导致的谱面丢失.二是能够随时回退到上一个版本,不必担心实验一些新配置以后要繁琐地删除实验摆放的note.

**注意 : 保存的时候请加上后缀`.csv`**

##### 备份

请把你的谱面文件备份到其他位置,以防不测.

#### 第四步 : 导出

和保存类似,在保存的时候保存为后缀为`.txt`即可.例如`chart_hard.txt`

还有更多请查看[我的原贴](/pages/newPCtyx.html)

后面还有一个PCtyx新旧版本对比

~~显然,PCTyx的存档文件不能直接导入Cytoid,我们需要一些转换,再次之前,让我们了解一下Cytoid读取的文件应该是怎样的~~

> v200.1已经支持导出为cy2格式

## 第三步 : 让Cytoid读取你的谱面

在[Cytoid.io](https://cytoid.io/)上,你可以下载各种玩家制作的千奇百怪的谱面.你下载到的文件通常以*.cytoidlevel*为后缀

cytoidlevel文件本质上是一个zip文件,所以我们可以把它的后缀改成 *.zip* 后,用解压软件打开.

我们以[Ecstatic](https://cytoid.io/levels/io.cytoid.ecstatic)为例

一个cytoidlevel文件里应该包括这些:

![4](/posts-source/cytoid/pic/4.jpg)



#### 将.CSV文件转换为Cytoid接受的样子

> v200已经不需要,转换器不支持v150以上版本

我们这里使用Lumi的转换器

 [Windows版本](/posts-source/cytoid/other/PCtyxToC2_Lumi_Windows.zip)   [MacOS版本](/posts-source/cytoid/other/PCtyxToC2_Lumi_macOS.zip) 

请先安装java8!!!不推荐其他版本!!!

以Windows版本为例

运行PCtyxToC2.bat文件,会打开一个CMD窗口

输入你的PCTyx存档位置(例如C:/1.csv),回车.

输入你想输出的文件路径(例如C:/1.easy.txt),回车.

输入y,回车

输入你的谱面bpm

输入一开始的速度(如果你谱面一开始就变速,就输入变速倍数,否则就1)

大功告成!

看不懂?

麻烦换PCtyx v200.2导出(无慈悲)

> 换成PCtyx v200可能会使谱面出现一些小问题,必须手动修复
>
>我就修了十分钟.jpg

#### Level.json *

这是官方的level.json格式.**请确保您不随意删除原来的文本.** 否则,您的谱面可能随时被删除,您的帐户可能会因多次违规而被封禁.

有留空项的请把被留空的项整个删除( CytoidIO升级导致的bug,不这样会无法读取 )

~~~json
{
  
  "version": 1,
  "schema_version": 2,

  "id": " ",

  "title": "",
  "title_localized": "",

  "artist": "",
  "artist_localized": "",
  "artist_source": "",
  "illustrator": "",
  "illustrator_source": "",

  "charter": "",
  
  "music": {
    "path": "music.mp3"
  },
  "music_preview": {
    "path": "preview.mp3"
  },
  "background": {
    "path": "background.jpg"
  },
  "charts": [
    {
      "type": "easy",
      "name": " ",
      "difficulty": 1,
      "path": "chart.easy.txt"
    },
    {
      "type": "hard",
      "name": " ",
      "difficulty": 9,
      "path": "chart.hard.txt"
    },
    {
      "type": "extreme",
      "name": " ",
      "difficulty": 15,
      "path": "chart.extreme.txt"
    }
  ]
  
}
~~~
看不懂?大丈夫!(没问题)

这里有模板,把你的信息换上去就是.

> 下面部分内容摘自官方wiki翻译

这是手动填写它的方式。手写比用编译器编写要好得多，因为**你不需要为它下载额外的软件**，更不用说**使用Cytoid谱面编译器的缺陷**（必须给它管理员权限）等等。在大多数情况下，手写的速度也要快得多，因此强烈推荐。请注意，“path”部分中的任何名称不必与示例相同，但音频的“path”和图像必须为.mp3（对于音频，不建议使用.wav）和.jpg / .png（用于图像）。

使用此作为参考指南。由于情况有可能不同，让我回答您下面可能遇到的所有问题。

请根据实际情况替换两个"-"里面的内容,并删除"-":

```json
{  
"version": -谱面版本号_纯数字-,
  "schema_version": 2,

  "id": "-你的cytoid账号-.-谱面名字-",
  
  "title": "-音乐标题-",
  "title_localized": "-音乐英文名-",

  "artist": "-曲师-",
  "artist_localized": "--曲师英文名-",
  "artist_source": "-曲师的链接-",

  "illustrator": "-画师-",
  "illustrator_source": "-画师的链接-",

  "charter": "-你的名字-",
  
  "music": {
    "path": "-音乐名称_.MP3_确保名称和音乐文件一致-"
  },
  "music_preview": {
    "path": "-预览音乐名称_.MP3_同上-"
  },
  "background": {
    "path": "-封面名称_.png or .jpg_同上-"
  },
  "charts": [
    {
      "type": "easy",
      "name": "-自定义难度名称，不需要则不填-"
      "difficulty": -难度等级_纯数字-,
      "path": "-谱面位置-"
    },
    {
      "type": "hard",
   "name": "-自定义难度名称-"
      "difficulty": -难度等级_纯数字-,
      "path": "-谱面位置-"
    },
    {
      "name": "-自定义难度名称-"
      "difficulty": -难度等级_纯数字-,
      "path": "-谱面位置-"
    }
  ]
  
}
```

##### 常问问题：

###### 问：我不需要3个难度。

A.删除不需要的难度，但请确保删除结尾逗号。例如，假设您只需要hard难度：

```
  "charts": [
    {
      "type": "easy",
    "name": "Lunatic"
      "difficulty": 9,
      "path": "lunatic.chart"
    },
    {
      "type": "hard",
   "name": "Very Hard"
      "difficulty": 10,
      "path": "hard.chart"
    },
    {
      "type": "extreme",
   "name": "Extreme Overload"
      "difficulty": 12,
      "path": "extreme.chart"
    }
  ]
```

在这里，你可以删除这样的部分。如果要删除extreme难度，请务必删除结束逗号！

```
  "charts": [
    {
      "type": "hard",
   "name": "Very Hard"
      "difficulty": 10,
      "path": "hard.chart"
    }
  ]
```



###### 问：如何添加故事板？

答：如果每个难度没有超过2个不同的故事板，则无需将其包含在json中。但是，如果你有第3个故事板，那么

```
    {
      "type": "extreme",
      "name": "Extreme Overload",
      "difficulty": 15,
      "path": "extreme.chart",
      },
      "storyboard": {
       "path": "storyboard3.json"
      }
```

可以为不同谱面添加不同的故事板。storyboard.json的名称不一定是“storyboard3.json”。

###### 问：我想为每个级别使用不同的音频文件，我该怎么办？

A.你可以像这样使用music_override：

```
    {
      "type": "extreme",
      "name": "Extreme Overload",
      "difficulty": 15,
      "path": "extreme.chart",
      "music_override": {
        "path": "music1.mp3"
      },
      "storyboard": {
       "path": "storyboard3.json"
      }
    }
```

添加music_override部分，并将要播放的音乐的“path”放在上面。



至于其他文件,直接替换就是

最后打包成.zip,然后改后缀为.cytoidlecel,你的谱面就打包好了,快上传到CytoidIO吧!



## 需要注意的

以下摘自官方wiki翻译

> 译者前言: 只要你做出来的谱面你自己能FC,那就是正确的

### 一些制谱的建议

Cytoid社区各成员的指南

#### 介绍

这是制谱的指南,**而不是一定**要这样制谱.您可以根据需要制谱.如果你愿意的话,可以把谱面塞满.

判断你的谱面的人将是玩家,而不是其他什么的.所以,本指南将指出是***如何使谱面不丑***.


#### 你需要先了解的事情 

作为一个谱师并不意味着你必须善于玩游戏.您只需要了解谱面的工作原理.您可以绘制高于自己水平的谱面,并让社区中的优秀玩家在游玩谱面时给你反馈.

事实上,在游戏中成绩“不好”,在制图时有自己的优势,所以如果有人MM了你的谱面,但你自己只能在得到90w时（事实上如果有人可以MM你的谱面,这意味着这个谱面没有大问题）,请不要因此沮丧.

每张谱面有自己的艺术,应该以不同的方式欣赏.(除非真的shit)每个人擅长的地方都不同,要保持开放的心态.话虽如此,每个人都需要遵循一条基线.


#### 谱面质量测量

##### 能玩

谱面至少必须是可玩的.通过可玩性,这意味着谱面中没有反趣的机制.具有反趣味的谱面意味着它的丑陋,不是质量差,而是纯粹的丑陋.反趣机制将在下面解释.整人/愚人/超难谱面被排除在外.

##### 气质

丑陋的谱面是具有反趣因素的谱面.坏谱面是主要填充了错误放置的note的谱面.体面谱面是**不**属于坏类别的谱面.好的谱面由玩家（以及社区）决定,现在通常通过cytoid.io的评级系统.~~乱塞~~超难谱面遵循其他的规则,因为它们更多的是用于欣赏而不是用于游玩.

***您作为谱师的要求是确保*** ***您的谱面不是丑陋的谱面***.

糟糕的谱面意味着你需要提高更多.但丑陋的谱面是无法忍受的.最后,***你作为一个谱师的工作是制作一个像样的谱面***.**一张好的谱面是社区认为这样的奖励**.（但是你应该总是瞄准好谱面,因为这对每个人来说都很有趣）.

#### 防止您的谱面变成丑陋的谱面

您需要先了解**反乐趣**的含义.反乐趣意味着玩家不是因为太弱而MISS,而是因为谱面设计.

有反乐趣因素可能会导致谱面被评为丑陋的谱面.

有两件事会让人们声明你的谱面是丑陋的,又名**反乐趣因素**：

1. 重叠的note.
2. 手挡住的note.

##### 重叠note

通过设计（并通过模仿其灵感,Cytus）,Cytoid使用相同的屏幕来记录上升和下降的音符.如果您不了解此类事件的后果,将会导致问题.

当你恍恍惚惚地打一首没有miss歌曲但是由于这种的事情而突然断了combo时,你能想象吗？很烦人吧？

玩家这种miss,不是因为他们缺乏技能,而是通过关卡设计.当然,出于这样的原因,他们会愤怒.

##### 修复

您可以通过简单地移除有问题的注释来解决此类问题 

##### 预防

为防止这种情况发生,PCTyx具有观察上一页note的功能.

它们以半透明的方式显示.不要将note放在完全被它们覆盖的地方.

##### 容忍重叠

你可以在一定程度上重叠note的某些部分,特别是如果你的歌曲具有高BPM时. 

我认为对于平板电脑来说,最大重叠量约为note的1/4,而手机约为1/3.

***BPM越高,重叠的可容忍性越小.越接近页面中间,重叠就越容易.***

##### Note被手挡住

手机和平板电脑的屏幕尺寸不同.平板电脑更大,因此手被阻挡的屏幕更少.当您选择在手机而非平板电脑上游玩谱面时,这一点格外重要.此外,所有针对手机设计的谱面都可以在平板电脑游玩.

除了重叠nots之外,您还必须担心玩家对于手挡住note的看法.

遗憾的是,感觉到被手挡住的note的能力只能通过多玩游戏来获得(多练.jpg).所以多玩音游!

你选择的歌曲BPM越高,你就越有可能理解这是什么.***请注意,谱面的bpm越高,被手区域就越大.***

无论什么时候,看一下官方wiki总是有帮助的.

传送门:[官方wiki](https://github.com/Teages/Cytoid-wiki-Chinese/)





